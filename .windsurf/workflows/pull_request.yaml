name: Propose and Create Pull Request

defaults:
  base_branch: mn_main

steps:
  - analyze_changes:
      description: "Analyze the latest changes and generate a proposed PR title and body."
      output_vars: [pr_title, pr_body]
  - prompt:
      message: |
        Review the proposed pull request title and description.
        Title: ${pr_title}
        Description:
        ${pr_body}
        Edit if necessary.
      var: pr_reviewed
      default:
        title: ${pr_title}
        body: ${pr_body}
  - run:
      command: |
        gh pr create --base mn_main --title "${pr_reviewed.title}" --body "${pr_reviewed.body}" --fill
      description: "Create a pull request to mn_main using the GitHub CLI"
