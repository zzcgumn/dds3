load("@rules_cc//cc:defs.bzl", "cc_library", "cc_test")

cc_library(
    name = "test_utilities",
    srcs = [
        "test_utilities.cpp",
        "mock_data_generators.cpp",
    ],
    hdrs = [
        "test_utilities.h",
        "mock_data_generators.h",
    ],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        "//library/src/data_types:dds_types",
        "@googletest//:gtest",
    ],
    visibility = ["//visibility:public"],
)

cc_test(
    name = "trans_table_base_test",
    srcs = ["trans_table_base_test.cpp"],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "trans_table_s_test",
    srcs = ["trans_table_s_test.cpp"],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "trans_table_l_test",
    srcs = ["trans_table_l_test.cpp"],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "trans_table_integration_test",
    srcs = ["trans_table_integration_test.cpp"],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        ":test_utilities",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "trans_table_performance_test",
    srcs = ["trans_table_performance_test.cpp"],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        ":test_utilities",
        "@googletest//:gtest_main",
    ],
)

cc_test(
    name = "trans_table_all_tests",
    srcs = [
        "trans_table_base_test.cpp",
        "trans_table_s_test.cpp",
        "trans_table_l_test.cpp",
        # Note: integration and performance tests excluded due to API and runtime issues
        # "trans_table_integration_test.cpp",
        # "trans_table_performance_test.cpp",
    ],
    deps = [
        "//library/src/trans_table:testable_trans_table",
        ":test_utilities",
        "@googletest//:gtest_main",
    ],
)
